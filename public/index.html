<!DOCTYPE html>
<html lang="en" data-wf-page="5c71b3e2fd081941e88d957a" data-wf-site="5c71b3e2fd081954878d9579">
  <head>
    <meta charset="utf-8">
    <title>Betcy</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="css/normalize.css" rel="stylesheet" type="text/css">
    <link href="css/webflow.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
    <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
    <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
    <link href="images/webclip.png" rel="apple-touch-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.7/vue.min.js" integrity="sha256-wjeNXh/Gd38adX82/m9I1JR9pAOIBo7rK0Rxogq4FQg=" crossorigin="anonymous"></script>


    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
  </head>
  <body>
    <noscript>
      <strong>We're sorry but Betcy doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script src="https://d1tdp7z6w94jbb.cloudfront.net/js/jquery-3.3.1.min.js" type="text/javascript" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="js/webflow.js" type="text/javascript"></script>
    <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--&lt;!&ndash; Include all compiled plugins (below), or include individual files as needed &ndash;&gt;-->
    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>-->

    <script src="https://cdn.jsdelivr.net/npm/nearlib@0.3.1/dist/nearlib.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="./js/config.js"></script>
    <script src="./js/main.js"></script>
<button id="clic" type="button">$</button>
<button id="clic2" type="button">$$</button>



    <script src="../../node_modules/web3/dist/web3.min.js"></script>

    <script>
       if(typeof web3 !== 'undefined') {
         console.log("Unlock MetaMask");
         web3 = new Web3(web3.currentProvider);
       }
       else {
         console.log("Install MetaMask");
         web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:3000"));
       }
       web3.version.getNetwork((err, netId) => {
  switch (netId) {
    case "1":
      console.log('This is mainnet')
      break
    case "2":
      console.log('This is the deprecated Morden test network.')
      break
    case "3":
      console.log('This is the ropsten test network.')
      break
    case "4":
      console.log('This is the Rinkeby test network.')
      break
    case "42":
      console.log('This is the Kovan test network.')
      break
    default:
      console.log('This is an unknown network.')
  }
})

       web3.eth.defaultAccount=web3.eth.accounts[0];

       var testContract = web3.eth.contract([
	{
		"constant": false,
		"inputs": [
			{
				"name": "b_id",
				"type": "uint256"
			}
		],
		"name": "acceptbet",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "sec",
				"type": "address"
			},
			{
				"name": "bettext",
				"type": "string"
			}
		],
		"name": "create_init",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "sec",
				"type": "address"
			},
			{
				"name": "bettext",
				"type": "string"
			},
			{
				"name": "productid",
				"type": "uint256"
			}
		],
		"name": "create_promise",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "prodid",
				"type": "uint256"
			}
		],
		"name": "finish_init",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "show_pending_requests",
		"outputs": [
			{
				"name": "",
				"type": "uint256[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "b_id",
				"type": "uint256"
			}
		],
		"name": "show_validity",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "b_id",
				"type": "uint256"
			}
		],
		"name": "showbets",
		"outputs": [
			{
				"name": "bet_id",
				"type": "uint256"
			},
			{
				"name": "creator",
				"type": "address"
			},
			{
				"name": "player",
				"type": "address"
			},
			{
				"name": "text",
				"type": "string"
			},
			{
				"name": "due_date",
				"type": "string"
			},
			{
				"name": "witness1",
				"type": "address"
			},
			{
				"name": "witness2",
				"type": "address"
			},
			{
				"name": "witness3",
				"type": "address"
			},
			{
				"name": "validity",
				"type": "uint256"
			},
			{
				"name": "productid",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "showlivebets",
		"outputs": [
			{
				"name": "",
				"type": "uint256[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]);


var test = testContract.at("0xddad47e9b65d51459762f5d43fb649faa07fffdd");
console.log(test);


</script>

<script>
  var getProductID = {
     "async": true,
     "crossDomain": true,
     "url": "https://www.jsonstore.io/cc18fd5358601223f518adc547cb765a84d85d34fbdfe3466b55d6e454f29bf1",
     "method": "GET"
     };

   $.ajax(getProductID).done(function (response) {
     var prod = JSON.stringify(response);
     // console.log(JSON.stringify(response));
       console.log(response.result);
       // $("#click").click(function() {
       //   console.log('Test ########################')
       //   test.create_promise("0xAcb7e46EA96A1C39C1eaF160FBACD302B3F28e17","I, Tanmay Agrawal, agree to participate in a \"Betcy\" between myself and Souradeep Das.",792565,(error,result) => (console.log(result)));
       // });
       $("#clic2").click(function() {
         test.finish_init(response.result,(error,result) => (console.log(result)));
       });
     });
     var getName = {
        "async": true,
        "crossDomain": true,
        "url": "https://www.jsonstore.io/f69f67573b1097131a3d0dd3238f05c01eb95d943adc8ec173d9b903f0989419",
        "method": "GET"
        };
     $.ajax(getName).done(function (response) {
       var prod = JSON.stringify(response);
       // console.log(JSON.stringify(response));
         console.log(response.result.receiver);
         // $("#click").click(function() {
         //   console.log('Test ########################')
         //   test.create_promise("0xAcb7e46EA96A1C39C1eaF160FBACD302B3F28e17","I, Tanmay Agrawal, agree to participate in a \"Betcy\" between myself and Souradeep Das.",792565,(error,result) => (console.log(result)));
         // });
         $("#clic").click(function() {
           console.log("###################");
           test.create_init("0xAcb7e46EA96A1C39C1eaF160FBACD302B3F28e17",response.result.receiver,(error,result) => (console.log(result)));
         });
       });




   var setProductID = {
      "async": true,
      "crossDomain": true,
      "url": "https://api.macys.com/v4/catalog/product/77589%28productdetails%28summary%29%29?productID=%2077589,520910&productdetails=%28productdetails%28price,summary%29%29",
      "method": "GET",
      "headers": {
        "Accept": "application/json",
        "x-macys-webservice-client-id": "h4ckathon",
        "cache-control": "no-cache",
        "Postman-Token": "40d0cb4e-dcf1-4cc0-92de-39649ddebfb0",
        "Access-Control-Allow-Origin": 'http://10.142.8.181:8081/'
      }
    };

    $.ajax(setProductID).done(function (response) {
      var prod = JSON.stringify(response);
      // console.log(JSON.stringify(response));
        console.log(response.product[0].id);
      });




     /* const Http = new XMLHttpRequest();
      const url='https://api.macys.com/v4/catalog/product/77589%28productdetails%28price,summary,availability%29,promotions,rebates%29?productID=%2077589,520910&productdetails=%28productdetails%28price,summary%29%29';
      Http.open("GET", url);
      Http.setRequestHeader("Accept", "application/json")
      Http.setRequestHeader("x-macys-webservice-client-id", "h4ckathon")
      Http.send();
      Http.onreadystatechange=(e)=>{
      console.log(Http.responseText)
      }*/
    // function jsonCallback(json){
    //   console.log(json);
    // }
    //
    // $.ajax({
    //   url: "https://api.macys.com/v4/catalog/product/77589%28productdetails%28summary%29%29?productID=%2077589,520910&productdetails=%28productdetails%28price,summary%29%29",
    //   dataType: "jsonp",
    //   method: "GET",
    //   headers: {
    //     "Accept": "application/json",
    //     "x-macys-webservice-client-id": "h4ckathon",
    //     "cache-control": "no-cache",
    //   }
    // });


</script>
    <!-- <script>
    var xhr = new XMLHttpRequest();
xhr.open('GET', "https://api.macys.com/v4/catalog/product/77589%28productdetails%28summary%29%29?productID=%2077589,520910&productdetails=%28productdetails%28price,summary%29%29", false);
xhr.send();

xhr.onreadystatechange = processRequest;
function processRequest(e) {
  if (xhr.readyState == 4 && xhr.status == 200) {
         var response = JSON.parse(xhr.responseText);
         alert(response.ip);
     }
}

    </script> -->

  </body>
</html>
